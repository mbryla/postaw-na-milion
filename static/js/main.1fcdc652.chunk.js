(this["webpackJsonppostaw-na-milion"]=this["webpackJsonppostaw-na-milion"]||[]).push([[0],{16:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var s=n(1),o=n.n(s),i=n(9),a=n.n(i),r=(n(16),n(2)),c=n(4),u=n(11),d=n(0),l=function(e){var t=e.color,n=void 0===t?"#efefef":t,s=e.disabled,o=e.onClick,i=e.children,a=e.style,r=void 0===a?{}:a,l=Object(u.a)(e,["color","disabled","onClick","children","style"]);return Object(d.jsx)("button",Object(c.a)(Object(c.a)({style:Object(c.a)({backgroundColor:s?"#efefef":n,marginRight:"10px",padding:"5px"},r),onClick:o,disabled:s},l),{},{children:i}))},j=function(e){var t=e.token,n=e.setToken,o=Object(s.useState)(t),i=Object(r.a)(o,2),a=i[0],c=i[1];return Object(d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(d.jsx)("label",{htmlFor:"token",children:"klucz dost\u0119pu:"}),Object(d.jsx)("input",{id:"token",autoFocus:!0,type:"password",value:a,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&n(a)},style:{flexGrow:1,margin:"0 10px"}}),Object(d.jsx)(l,{onClick:function(){n(a)},color:"lightcoral",children:"zmie\u0144"})]})},p=function(e){var t=e.setMode;return Object(d.jsxs)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:[Object(d.jsx)(l,{onClick:function(){t("player")},style:{marginRight:"40px"},children:"gracz"}),Object(d.jsx)(l,{onClick:function(){t("admin")},children:"admin"})]})},b=n(3),g=Object(s.createContext)(void 0),y="events",h=function(e){var t=Object(s.useMemo)((function(){return{message:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){console.debug("received message",t),t.channel===y&&e(t.message)}))}}),[e]),n=Object(s.useContext)(g);if(!n)throw new Error("PubNubContext is undefined");Object(s.useEffect)((function(){return n.addListener(t),n.subscribe({channels:["events"]}),function(){return null===n||void 0===n?void 0:n.removeListener(t)}}),[n,t])},m={type:"round-state-empty"},f={type:"admin-state-empty"},x=function(e){var t=e.questions,n=e.usedQuestions,s=e.usedCategories,o=e.adminState,i=e.changeAdminState;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("h1",{children:["Wczytane pytania (",t.length,")"]}),Object(d.jsx)("ul",{children:t.map((function(e){var t=n.includes(e.id),a="admin-state-base"===o.type&&"manual"===o.questionsSelectionMode&&"round-state-pick-questions"===o.roundState.type,r=a&&"admin-state-base"===o.type&&"round-state-pick-questions"===o.roundState.type&&o.roundState.pickedQuestionsIds.includes(e.id);return Object(d.jsxs)("li",{children:[a&&!t&&Object(d.jsx)("input",{type:"checkbox",style:{width:"13px",outline:"5px solid lightgreen",backgroundColor:"lightyellow",marginRight:"10px"},checked:r,onChange:function(){if("admin-state-base"===o.type&&"round-state-pick-questions"===o.roundState.type){var t=Object(b.a)(o.roundState.pickedQuestionsIds),n=t.findIndex((function(t){return t===e.id}));n>-1?t.splice(n,1):t.push(e.id),i({questionsById:o.questionsById,answeredQuestionsCount:o.answeredQuestionsCount,usedCategories:o.usedCategories,usedQuestions:o.usedQuestions,questionsSelectionMode:o.questionsSelectionMode,type:"admin-state-base",roundState:{type:"round-state-pick-questions",pickedQuestionsIds:t}})}}}),Object(d.jsx)("span",{style:{textDecoration:t?"line-through":"none"},children:e.text}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:["kategorie:"," ",e.possibleCategories.filter((function(t,n){return!s.includes("".concat(e.id,"-").concat(n))})).join(", ")]}),Object(d.jsxs)("li",{children:["zu\u017cyte kategorie:"," ",Object(d.jsx)("span",{style:{textDecoration:"line-through"},children:e.possibleCategories.filter((function(t,n){return s.includes("".concat(e.id,"-").concat(n))})).join(", ")})]}),Object(d.jsxs)("li",{children:["odpowiedzi: ",e.answers.join(", ")]})]})]},e.id)}))})]})},O={type:"game-state-show-title"},w=function(e){var t=e.onQuestionsLoad,n=Object(s.useState)(""),o=Object(r.a)(n,2),i=o[0],a=o[1],c=function(){var e=JSON.parse(i),n={};e.forEach((function(e){return n[e.id]=e})),t(n)};return Object(d.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[Object(d.jsx)("label",{htmlFor:"questions",children:"wczytaj pytania:"}),Object(d.jsx)("input",{type:"text",value:i,onChange:function(e){a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&c()},style:{flexGrow:1,margin:"0 10px"}}),Object(d.jsx)(l,{onClick:function(){c()},color:"lightcoral",children:"wczytaj"})]})},S=function(){var e=Object(s.useState)(f),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(s.useState)(O),a=Object(r.a)(i,2),u=a[0],j=a[1],p=function(){var e=Object(s.useContext)(g);if(!e)throw new Error("PubNubContext is undefined");return Object(s.useCallback)((function(t){return e.publish({channel:y,message:t})}),[e])}();h((function(e){"admin-state-update"===e.type?o(e.state):"game-state-update"===e.type&&j(e.state)}));var S=function(e){p({type:"admin-state-update",state:e})},Q=function(e){p({type:"game-state-update",state:e})},I=function(e){p(e).then((function(){console.debug('successfully sent "'.concat(e.type,'" message'))})).catch((function(t){console.error('failed to send "'.concat(e.type,'" message')),console.debug(t)}))};return Object(d.jsxs)("div",{children:["admin-state-base"===n.type&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Nawigacja"}),"manual"===n.questionsSelectionMode&&Object(d.jsx)(l,{disabled:!(("game-state-show-title"===u.type||"game-state-show-status"===u.type)&&"round-state-empty"===n.roundState.type),onClick:function(){return S({type:"admin-state-base",questionsSelectionMode:n.questionsSelectionMode,questionsById:n.questionsById,answeredQuestionsCount:n.answeredQuestionsCount,usedCategories:n.usedCategories,usedQuestions:n.usedQuestions,roundState:{type:"round-state-pick-questions",pickedQuestionsIds:[]}})},style:{marginBottom:"10px"},color:"lightgreen",children:"wybierz pytania"}),Object(d.jsx)(l,{disabled:!(("game-state-show-title"===u.type||"game-state-show-status"===u.type)&&("automatic"===n.questionsSelectionMode&&"round-state-empty"===n.roundState.type||"round-state-pick-questions"===n.roundState.type&&n.roundState.pickedQuestionsIds.length>0&&n.roundState.pickedQuestionsIds.length<=2)),onClick:function(){if("admin-state-base"===n.type){var e=Object.values(n.questionsById),t=e.filter((function(e){return!n.usedQuestions.includes(e.id)})).filter((function(e){return!e.shouldBeAskedLast}));if(0===t.length&&0===(t=e.filter((function(e){return!n.usedQuestions.includes(e.id)}))).length)return;var s="round-state-pick-questions"===n.roundState.type?n.roundState.pickedQuestionsIds:[],o="automatic"===n.questionsSelectionMode?t[0]:n.questionsById[s[0]],i="automatic"===n.questionsSelectionMode?1===t.length?o:t[1]:1===s.length?o:n.questionsById[s[1]],a=o.possibleCategories.findIndex((function(e,t){return!n.usedCategories.includes("".concat(o.id,"-").concat(t))})),r=o.possibleCategories[a],c="".concat(o.id,"-").concat(a),u=i.possibleCategories.findIndex((function(e,t){return![].concat(Object(b.a)(n.usedCategories),[c]).includes("".concat(i.id,"-").concat(t))})),d=i.possibleCategories[u],l="".concat(i.id,"-").concat(u);S({type:"admin-state-base",questionsSelectionMode:n.questionsSelectionMode,usedQuestions:n.usedQuestions,questionsById:n.questionsById,answeredQuestionsCount:n.answeredQuestionsCount,usedCategories:[].concat(Object(b.a)(n.usedCategories),[c,l]),roundState:{type:"round-state-select-category",firstQuestion:o,firstQuestionCategory:r,secondQuestion:i,secondQuestionCategory:d}}),Q({type:"game-state-show-categories",categories:[r,d]})}},color:"lightgreen",style:{marginBottom:"10px"},children:"rozpocznij rund\u0119"}),Object(d.jsx)(l,{disabled:!("round-state-show-question"===n.roundState.type),color:"lightgreen",onClick:function(){"admin-state-base"===n.type&&"round-state-show-question"===n.roundState.type&&"game-state-show-question"===u.type&&(I({type:"reset-timer-60"}),S({type:"admin-state-base",questionsSelectionMode:n.questionsSelectionMode,questionsById:n.questionsById,answeredQuestionsCount:n.answeredQuestionsCount,usedCategories:n.usedCategories,usedQuestions:n.usedQuestions,roundState:{type:"round-state-select-answers",question:n.roundState.question}}),Q({type:"game-state-show-question",answers:u.answers,selectedAnswers:u.selectedAnswers,question:n.roundState.question.text}))},style:{marginBottom:"10px"},children:"poka\u017c pytanie"}),Object(d.jsx)(l,{disabled:!("round-state-select-answers"===n.roundState.type)||"game-state-show-question"===u.type&&0===u.selectedAnswers.filter((function(e){return!0===e})).length,onClick:function(){"admin-state-base"===n.type&&"round-state-select-answers"===n.roundState.type&&"game-state-show-question"===u.type&&(I({type:"stop-timer"}),S({type:"admin-state-base",questionsSelectionMode:n.questionsSelectionMode,questionsById:n.questionsById,answeredQuestionsCount:n.answeredQuestionsCount,usedCategories:n.usedCategories,usedQuestions:n.usedQuestions,roundState:{type:"round-state-empty"}}),Q({type:"game-state-show-question",answers:u.answers,selectedAnswers:u.selectedAnswers,question:n.roundState.question.text,correctAnswerIndex:n.roundState.question.correctAnswerIndex}))},color:"lightgreen",style:{marginBottom:"10px"},children:"poka\u017c poprawne odpowiedzi"}),Object(d.jsx)(l,{disabled:!("game-state-show-question"===u.type&&void 0!==u.correctAnswerIndex),onClick:function(){if("admin-state-base"===n.type&&"game-state-show-question"===u.type&&void 0!==u.correctAnswerIndex){var e=n.answeredQuestionsCount,t=Object.keys(n.questionsById).length;S({type:"admin-state-base",questionsSelectionMode:n.questionsSelectionMode,questionsById:n.questionsById,usedCategories:n.usedCategories,usedQuestions:n.usedQuestions,answeredQuestionsCount:e,roundState:{type:"round-state-empty"}}),Q(e===t?{type:"game-state-show-title"}:{type:"game-state-show-status",answeredQuestionsCount:e,totalQuestionsCount:t})}},color:"lightgreen",style:{marginBottom:"10px"},children:"poka\u017c podsumowanie"}),Object(d.jsx)(q,{send:I}),("round-state-select-category"===n.roundState.type||"round-state-select-answers"===n.roundState.type)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Rozgrywka"}),"round-state-select-category"===n.roundState.type&&Object(d.jsx)(v,{changeAdminState:S,changeGameState:Q,adminState:n,gameState:u}),"round-state-select-answers"===n.roundState.type&&Object(d.jsx)(C,{changeAdminState:S,changeGameState:Q,adminState:n,gameState:u})]})]}),"admin-state-base"===n.type&&Object(d.jsx)(x,{questions:Object.values(n.questionsById),usedQuestions:n.usedQuestions,usedCategories:n.usedCategories,adminState:n,changeAdminState:S}),Object(d.jsx)(k,{adminState:n,changeAdminState:S,gameState:u,changeGameState:Q}),Object(d.jsx)("h1",{children:"Konfiguracja serwisu"}),Object(d.jsx)(w,{onQuestionsLoad:function(e){S({type:"admin-state-base",questionsSelectionMode:"manual",usedQuestions:[],usedCategories:[],answeredQuestionsCount:0,roundState:m,questionsById:e}),Q(O)}}),Object(d.jsxs)("p",{children:["r\u0119czny wyb\xf3r pyta\u0144"," ",Object(d.jsx)("input",{type:"checkbox",disabled:!("admin-state-base"===n.type&&"round-state-empty"===n.roundState.type&&("game-state-show-title"===u.type||"game-state-show-status"===u.type)),checked:"admin-state-base"===n.type&&"manual"===n.questionsSelectionMode,onChange:function(){"admin-state-base"===n.type&&S(Object(c.a)(Object(c.a)({},n),{},{questionsSelectionMode:"automatic"===n.questionsSelectionMode?"manual":"automatic"}))}})]})]})},C=function(e){var t=e.adminState,n=e.gameState,s=e.changeGameState;if("admin-state-base"!==t.type||"round-state-select-answers"!==t.roundState.type)return null;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Prze\u0142\u0105cz zaznaczenie odpowiedzi"}),t.roundState.question.answers.map((function(e,o){return Object(d.jsx)(l,{onClick:function(){return function(e){if("admin-state-base"===t.type&&"round-state-select-answers"===t.roundState.type&&"game-state-show-question"===n.type){var o=Object(b.a)(n.selectedAnswers);o[e]=!o[e],s({type:"game-state-show-question",question:n.question,answers:n.answers,selectedAnswers:o})}}(o)},color:"game-state-show-question"===n.type&&n.selectedAnswers[o]?"yellow":"lightyellow",style:{marginBottom:"10px"},children:e},e)}))]})},v=function(e){var t=e.adminState,n=e.changeAdminState,s=e.changeGameState;if("admin-state-base"!==t.type||"round-state-select-category"!==t.roundState.type)return null;var o=function(e){if("admin-state-base"===t.type&&"round-state-select-category"===t.roundState.type){var o=0===e?t.roundState.firstQuestion:t.roundState.secondQuestion;n({type:"admin-state-base",questionsSelectionMode:t.questionsSelectionMode,usedQuestions:[].concat(Object(b.a)(t.usedQuestions),[o.id]),questionsById:t.questionsById,answeredQuestionsCount:t.answeredQuestionsCount+1,usedCategories:t.usedCategories,roundState:{type:"round-state-show-question",question:o}}),s({type:"game-state-show-question",answers:o.answers,selectedAnswers:new Array(o.answers.length).fill(!1)})}};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Wska\u017c wybran\u0105 kategori\u0119"}),Object(d.jsx)(l,{onClick:function(){return o(0)},color:"lightgreen",children:t.roundState.firstQuestionCategory}),Object(d.jsx)(l,{onClick:function(){return o(1)},color:"lightgreen",children:t.roundState.secondQuestionCategory})]})},q=function(e){var t=e.send;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Zegar"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l,{onClick:function(){return t({type:"start-timer"})},style:{marginBottom:"10px"},children:"start"}),Object(d.jsx)(l,{onClick:function(){return t({type:"stop-timer"})},style:{marginBottom:"10px"},children:"stop"}),Object(d.jsx)(l,{onClick:function(){return t({type:"reset-timer-60"})},style:{marginBottom:"10px"},children:"reset 60s"}),Object(d.jsx)(l,{onClick:function(){return t({type:"reset-timer-30"})},style:{marginBottom:"10px"},children:"reset 30s"})]})]})},k=function(e){var t=e.adminState,n=e.changeAdminState,s=e.gameState,o=e.changeGameState;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Synchronizacja"}),Object(d.jsx)(l,{onClick:function(){n(t),o(s)},color:"yellow",children:"wymu\u015b propagacj\u0119 stanu"}),Object(d.jsx)(l,{onClick:function(){n(f),o(O)},color:"lightcoral",children:"resetuj stan"})]})},Q=function(e,t){return("0".repeat(t)+e).slice(-1*t)},I=function(e){var t=e.value,n=Math.floor(t/6e4),s=Math.floor(t/1e3)%60;return Object(d.jsxs)("span",{children:[Q(n,2),":",Q(s,2)]})},B=function(e){var t=e.children,n=e.isSelected,s=void 0!==n&&n,o=e.isCorrect,i=void 0===o?"#f1f1f1":o?"lightgreen":"lightcoral";return Object(d.jsx)("div",{style:{margin:"20px",padding:"20px",backgroundColor:i,borderRadius:"8px",border:"2px solid gray",boxShadow:s?"0 0 7pt 7pt yellow":"none",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:t})},M=function(e){var t=e.question,n=e.answers,s=e.selectedAnswers,o=e.correctAnswerIndex,i=e.time;return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsx)(B,{children:t}),n&&s&&Object(d.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-around"},children:n.map((function(e,t){var n=s[t],i=void 0===o?void 0:o===t;return Object(d.jsx)(B,{isSelected:n,isCorrect:i,children:e},e)}))}),void 0!==i&&Object(d.jsx)(B,{isSelected:i<=1e4&&i>0||void 0,isCorrect:0!==i&&void 0,children:Object(d.jsx)(I,{value:i})})]})},A=function(e){var t=e.categories;return Object(d.jsx)(d.Fragment,{children:t.map((function(e){return Object(d.jsx)(B,{children:e},e)}))})},z=function(e){var t=e.answeredQuestionsCount,n=e.totalQuestionsCount;return Object(d.jsxs)(B,{children:["odpowiedziano na ",t===n?n:t," z ",n," pyta\u0144"]})},G=n.p+"static/media/postaw-na-milion-logo.bcc089d5.png",N=function(){return Object(d.jsx)("img",{src:G,alt:"logo",style:{width:"60%"}})},E=6e4,F=function(){var e=Object(s.useState)(O),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(s.useState)(!1),a=Object(r.a)(i,2),c=a[0],u=a[1],l=Object(s.useState)(E),j=Object(r.a)(l,2),p=j[0],b=j[1];return h((function(e){"game-state-update"===e.type?o(e.state):"reset-timer-60"===e.type?b(E):"reset-timer-30"===e.type?b(3e4):"start-timer"===e.type?u(!0):"stop-timer"===e.type&&u(!1)})),function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=e}),[e]),Object(s.useEffect)((function(){if(void 0!==t){var e=setInterval((function(){var e;return null===(e=n.current)||void 0===e?void 0:e.call(n)}),t);return function(){return clearInterval(e)}}}),[t])}((function(){b((function(e){return e-1e3}))}),c&&p>0?1e3:void 0),Object(d.jsxs)("div",{style:{width:"100wh",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",background:"linear-gradient(to right, #0575e6, #021b79)",fontSize:"2em"},children:["game-state-show-title"===n.type&&Object(d.jsx)(N,{}),"game-state-show-status"===n.type&&Object(d.jsx)(z,{answeredQuestionsCount:n.answeredQuestionsCount,totalQuestionsCount:n.totalQuestionsCount}),"game-state-show-categories"===n.type&&Object(d.jsx)(A,{categories:n.categories}),"game-state-show-question"===n.type&&Object(d.jsx)(M,{question:n.question,answers:n.answers,selectedAnswers:n.selectedAnswers,correctAnswerIndex:n.correctAnswerIndex,time:n.question?p:void 0})]})},R=n(10),D=n.n(R),T=function(e){var t=e.token,n=e.children,o=Object(s.useMemo)((function(){console.debug("Generating new PubNub instance");var e=new D.a({publishKey:"pub-c-b74ce4d1-8afe-4bf0-96e4-99b724ce19f3",subscribeKey:"sub-c-b5136f45-991b-4553-85ac-1a8c3ceea131",uuid:"c1ca77bd-911e-4816-9e43-60e29569bac7"});return t&&e.setToken(t),e}),[t]);return Object(d.jsx)(g.Provider,{value:o,children:n})},L=function(){var e=Object(s.useState)(),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(s.useState)(""),a=Object(r.a)(i,2),c=a[0],u=a[1];return Object(d.jsxs)("main",{children:[void 0===n&&Object(d.jsx)(p,{setMode:o}),"player"===n&&Object(d.jsx)(T,{token:"qEF2AkF0GmKjfcBDdHRsGRDgQ3Jlc6VEY2hhbqFmZXZlbnRzAUNncnCgQ3VzcqBDc3BjoER1dWlkoENwYXSlRGNoYW6gQ2dycKBDdXNyoENzcGOgRHV1aWSgRG1ldGGgRHV1aWR4JGMxY2E3N2JkLTkxMWUtNDgxNi05ZTQzLTYwZTI5NTY5YmFjN0NzaWdYIMxgBxA87dXX6MzOhKfWzYmuglADdmsvxLMa6JlcMC2k",children:Object(d.jsx)(F,{})}),"admin"===n&&Object(d.jsxs)("div",{style:{padding:"20px"},children:[c&&Object(d.jsx)(T,{token:c,children:Object(d.jsx)(S,{})}),Object(d.jsx)(j,{token:c,setToken:u})]})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),o(e),i(e),a(e)}))};a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root")),W()}},[[22,1,2]]]);
//# sourceMappingURL=main.1fcdc652.chunk.js.map